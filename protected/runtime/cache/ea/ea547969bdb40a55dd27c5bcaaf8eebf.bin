a:2:{i:0;a:2:{i:0;s:64324:"<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta property="qc:admins" content="043453532776115117211163757" />
    <title>浅谈 HTTPS 和 SSL/TLS 协议的背景与基础-七秒记忆网</title>
    <meta name="keywords" content="浅谈 HTTPS 和 SSL/TLS 协议的背景与基础-七秒记忆网,个人博客,七秒记忆,技术博客,技术分享-七秒记忆网" />
    <meta name="description" content="浅谈 HTTPS 和 SSL/TLS 协议的背景与基础" />
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <!--百度统计-->
    <script>
    var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?b4b71ff95b7da5cd96d1bbe1c34ec647";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


    <link rel="stylesheet" href="/assets/home/css/base.css"/>
    <link rel="stylesheet" href="/assets/home/css/laypage.css"/>
    <link rel="stylesheet" href="/assets/home/css/style.css"/>
    <script src="https://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/home/js/jquery.easing.min.js"></script>
    <script src="/assets/home/js/laypage.js"></script>
    <script src="/assets/home/js/cookie.js"></script>
    <script type="text/javascript" charset="utf-8" src="/assets/home/js/xss.min.js"></script>
    <script src="/assets/home/js/main.js"></script>
     <!-- 引入文件 -->
    <!-- 指定回调地址，同时回调地址要与申请的回调地址一致 -->
    <script type="text/javascript" src="https://qzonestyle.gtimg.cn/qzone/openapi/qc_loader.js" data-appid="101340021" data-redirecturi="https://www.qimiaojiyi.com/qqcontect/sheng.html" charset="utf-8"></script>
</head>
<body>
   <div class="header">
       <ul class="navBar">
           <li class="nav"><a href="/" >首页</a></li>
           <li class="nav"><a href="/home/front" >前端</a></li>
           <li class="nav"><a href="/home/back" class="lineOn">后端</a></li>
           <li class="nav"><a href="/home/system" >运维</a></li>
           <li class="nav"><a href="/home/zatan" >网络杂谈</a></li>
           <li class="nav"><a href="/home/leavemsg" >给我留言</a></li>
       </ul>
       <!--<p class="search">
           <input type="text" id="serachText" placeholder="搜索"><a href="#" id="serachSbmit"><img src="/assets/home/img/glyphicons-halflings-white.png" alt="搜索"></a>
       </p>-->
       <div class="linestyle">
             <div class="lineHover" style="display: none;"></div>
       </div>
       
   </div>
   <script type="text/javascript" charset="utf-8" src="/assets/ueditor/ueditor.parse.min.js"></script>
<script type="text/javascript" src="http://qzonestyle.gtimg.cn/qzone/openapi/qc_loader.js" data-appid="101340021" data-redirecturi="http://www.qimiaojiyi.com/qqcontect/sheng.html" charset="utf-8"></script>
<div class="bodys">
   <div class="article">
			<ul class="right list">
                            <li style="padding-top:0px;">
                                    <img src="/uploads/avatar/a36dedd4bea2543/8f14e45fce.png" style="float: left;width:35px;vertical-align:middle;margin-right: 10px;border-radius: 50%;">
                                    <h4 articleid=5 class="onlyId">浅谈 HTTPS 和 SSL/TLS 协议的背景与基础</h4>
                                    <div class="tool">
			               <p>
			                    <span class="time"><span class="icon"></span>2016-09-01</span>
			                    <span class="autour"><span class="icon"></span>hito</span>
			                    <span class="clicks" id="5">
			                        <span class="icon"></span>
			                        <span class="number">16</span>
			                        <span class="title">您已赞过...</span>
			                    </span>
			               </p>
			               <div class="bdsharebuttonbox shares"><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tieba" data-cmd="tieba" title="分享到百度贴吧"></a><a href="#" class="bds_bdysc" data-cmd="bdysc" title="分享到百度云收藏"></a></div>
			           </div>
			               <div class="content text">
			               <p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">考虑到很多技术菜鸟可能不了解上述背景，俺先用最简短的文字描述一下。如果你自认为不是菜鸟，请略过本章节，直接去看“HTTPS 协议的需求”。</span></p><h2 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px;">1、“HTTP”是干嘛用滴？</span></strong></span></h2><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;"><span style="font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">首先，</span>HTTP 是一个网络协议，是专门用来帮你传输 Web 内容滴。关于这个协议，就算你不了解，至少也听说过吧？</span><span style="font-size: 16px; color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; letter-spacing: 0px;">&nbsp;</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><span style="color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">比如你访问俺的博客的主页，浏览器地址栏会出现网址：</span><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">http:</span></strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">//program-think.blogspot.com/ 。</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">俺加了粗体的部分就是指 HTTP 协议。大部分网站都是通过 HTTP 协议来传输 Web 页面、以及 Web 页面上包含的各种东东（图片、CSS 样式、JS 脚本）。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px;">2、“SSL/TLS”是干嘛用滴？</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:16px;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">SSL 是洋文“Secure Sockets Layer”的缩写，中文叫做“安全套接层”。它是在上世纪90年代中期，由网景公司设计的。（顺便插一句，网景公司不光发明了 SSL，还发明了很多 Web 的基础设施——比如“CSS 样式表”和“JS 脚本”）</span></p><p style="margin-top:0;margin-right:0;margin-bottom:16px;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px; color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; letter-spacing: 0px;">为啥要发明 SSL 这个协议捏？因为原先互联网上使用的 HTTP 协议是明文的，存在很多缺点——比如传输内容会被偷窥（嗅探）和篡改。发明 SSL 协议，就是为了解决这些问题。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">到了1999年，SSL 因为应用广泛，已经成为互联网上的事实标准。IETF 就在那年把 SSL 标准化。标准化之后的名称改为 TLS（是“Transport Layer Security”的缩写），中文叫做“传输层安全协议”。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">很多相关的文章都把这两者并列称呼（SSL/TLS），因为这两者可以视作同一个东西的不同阶段。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px;">3、“HTTPS”是啥意思？</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">解释完 HTTP 和 SSL/TLS，现在就可以来解释 HTTPS 啦。咱们通常所说的 HTTPS 协议，说白了就是“HTTP 协议”和“SSL/TLS 协议”的组合。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">你可以把 HTTPS 大致理解为——“HTTP over SSL”或“HTTP over TLS”（反正 SSL 和 TLS 差不多）。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><br/></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">作为背景知识介绍，还需要再稍微谈一下 HTTP 协议本身的特点。HTTP 本身有很多特点，考虑到篇幅有限，俺只谈那些和 HTTPS 相关的特点。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px;">1、HTTP 的版本和历史</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">如今咱们用的 HTTP 协议，版本号是 1.1（也就是 HTTP 1.1）。这个 1.1 版本是1995年底开始起草的（技术文档是 RFC2068），并在1999年正式发布（技术文档是 RFC2616）。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">在 1.1 之前，还有曾经出现过两个版本“0.9 和 1.0”，其中的 HTTP 0.9 【没有】被广泛使用，而 HTTP 1.0 被广泛使用过。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">另外，据说明年（2015）IETF 就要发布 HTTP 2.0 的标准了。俺拭目以待。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px;">2、HTTP 和 TCP 之间的关系</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">简单地说，TCP 协议是 HTTP 协议的基石——HTTP 协议需要依靠 TCP 协议来传输数据。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;"><span style="font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">在网络分层模型中，</span>TCP 被称为“传输层协议”，而 HTTP 被称为“应用层协议”。</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">有很多常见的应用层协议是以 TCP 为基础的，比如“FTP、SMTP、POP、IMAP”等。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">TCP 被称为“面向连接”的传输层协议。关于它的具体细节，俺就不展开了（否则篇幅又失控了）。你只需知道：传输层主要有两个协议，分别是 TCP 和 UDP。TCP 比 UDP 更可靠。你可以把 TCP 协议想象成某个水管，发送端这头进水，接收端那头就出水。并且 TCP 协议能够确保，先发送的数据先到达（与之相反，UDP 不保证这点）。</span><span style="font-size: 16px; color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; letter-spacing: 0px;">&nbsp;</span></span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px;">3、HTTP 协议如何使用 TCP 连接？</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">HTTP 对 TCP 连接的使用，分为两种方式：俗称“短连接”和“长连接”（“长连接”又称“持久连接”，洋文叫做“Keep-Alive”或“Persistent Connection”）</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">假设有一个网页，里面包含好多图片，还包含好多【外部的】CSS 文件和 JS 文件。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">在“短连接”的模式下，浏览器会先发起一个 TCP 连接，拿到该网页的 HTML 源代码（拿到 HTML 之后，这个 TCP 连接就关闭了）。然后，浏览器开始分析这个网页的源码，知道这个页面包含很多外部资源（图片、CSS、JS）。然后针对【每一个】外部资源，再分别发起一个个 TCP 连接，把这些文件获取到本地（同样的，每抓取一个外部资源后，相应的 TCP 就断开）</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;"><span style="font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">相反，如果是</span>“长连接”的方式，浏览器也会先发起一个 TCP 连接去抓取页面。但是抓取页面之后，该 TCP 连接并不会立即关闭，而是暂时先保持着（所谓的“Keep-Alive”）。然后浏览器分析 HTML 源码之后，发现有很多外部资源，就用刚才那个 TCP 连接去抓取此页面的外部资源。</span><span style="font-size: 16px; color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; letter-spacing: 0px;">&nbsp;</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">在 HTTP 1.0 版本，【默认】使用的是“短连接”（那时候是 Web 诞生初期，网页相对简单，“短连接”的问题不大）；</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">到了1995年底开始制定 HTTP 1.1 草案的时候，网页已经开始变得复杂（网页内的图片、脚本越来越多了）。这时候再用短连接的方式，效率太低下了（因为建立 TCP 连接是有“时间成本”和“CPU 成本”滴）。所以，在 HTTP 1.1 中，【默认】采用的是“Keep-Alive”的方式。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">关于“Keep-Alive”的更多介绍，可以参见维基百科词条。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;"><br/></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong style="color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; letter-spacing: 0px; line-height: 30px;"><span style="font-size: 16px; font-family: 微软雅黑; color: rgb(0, 187, 236);">谈谈“对称加密”和“非对称加密”的概念</span></strong></span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px;">1、啥是“加密”和“解密”？</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">通俗而言，你可以把“加密”和“解密”理解为某种【互逆的】数学运算。就好比“加法和减法”互为逆运算、“乘法和除法”互为逆运算。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">“加密”的过程，就是把“明文”变成“密文”的过程；反之，“解密”的过程，就是把“密文”变为“明文”。在这两个过程中，都需要一个关键的东东——叫做“密钥”——来参与数学运算。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px;">2、啥是“对称加密”？</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">所谓的“对称加密技术”，意思就是说：“加密”和“解密”使用【相同的】密钥。这个比较好理解。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">就好比你用 7zip 或 WinRAR 创建一个带密码（口令）的加密压缩包。当你下次要把这个压缩文件解开的时候，你需要输入【同样的】密码。在这个例子中，密码/口令就如同刚才说的“密钥”。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px;">3、啥是“非对称加密”？</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">所谓的“非对称加密技术”，意思就是说：“加密”和“解密”使用【不同的】密钥。这玩意儿比较难理解，也比较难想到。当年“非对称加密”的发明，还被誉为“密码学”历史上的一次革命。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">由于篇幅有限，对“非对称加密”这个话题，俺就不展开了。有空的话，再单独写一篇扫盲。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px;">4、各自有啥优缺点？</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">看完刚才的定义，很显然：（从功能角度而言）“非对称加密”能干的事情比“对称加密”要多。这是“非对称加密”的优点。但是“非对称加密”的实现，通常需要涉及到“复杂数学问题”。所以，“非对称加密”的性能通常要差很多（相对于“对称加密”而言）。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">这两者的优缺点，也影响到了 SSL 协议的设计。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;"><br/></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong style="line-height: 30px;"><span style="font-size: 16px; font-family: 微软雅黑; color: rgb(0, 187, 236);">CA 证书的原理及用途</span></strong></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">关于这方面，请看俺4年前写的《数字证书及CA的扫盲介绍》。这里就不再重复唠叨了，免得篇幅太长。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong style="line-height: 30px;"><span style="font-size: 16px; font-family: 微软雅黑; color: rgb(0, 187, 236);">HTTPS 协议的需求是啥？</span></strong><span style="font-size: 16px; color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; letter-spacing: 0px;">&nbsp;</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">花了好多口水，终于把背景知识说完了。下面正式进入正题。先来说说当初设计 HTTPS 是为了满足哪些需求？</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">很多介绍 HTTPS 的文章一上来就给你讲实现细节。个人觉得：这是不好的做法。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">早在2009年开博的时候，发过一篇《学习技术的三部曲：WHAT、HOW、WHY》，其中谈到“WHY 型问题”的重要性。一上来就给你讲协议细节，你充其量只能知道 WHAT 和 HOW，无法理解 WHY。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">俺在前一个章节讲了“背景知识”，在这个章节讲了“需求”，这就有助于你理解：当初为什么要设计成这样？——这就是 WHY 型的问题。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">兼容性</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">因为是先有 HTTP 再有 HTTPS。所以，HTTPS 的设计者肯定要考虑到对原有 HTTP 的兼容性。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">这里所说的兼容性包括很多方面。比如已有的 Web 应用要尽可能无缝地迁移到 HTTPS；比如对浏览器厂商而言，改动要尽可能小；……</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">基于“兼容性”方面的考虑，很容易得出如下几个结论：</span></p><p style="margin-top:0;margin-right:0;margin-bottom:16px;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">1、HTTPS 还是要基于 TCP 来传输</span></p><p style="margin-top:0;margin-right:0;margin-bottom:16px;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px; color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; letter-spacing: 0px;">（如果改为 UDP 作传输层，无论是 Web 服务端还是浏览器客户端，都要大改，动静太大了）</span></p><p style="margin-top:0;margin-right:0;margin-bottom:16px;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">2、单独使用一个新的协议，把 HTTP 协议包裹起来</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;"><span style="font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">（所谓的</span>“HTTP over SSL”，实际上是在原有的 HTTP 数据外面加了一层 SSL 的封装。HTTP 协议原有的 GET、POST 之类的机制，基本上原封不动）</span><span style="font-size: 16px; color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; letter-spacing: 0px;">&nbsp;</span></span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">打个比方：如果原来的 HTTP 是塑料水管，容易被戳破；那么如今新设计的 HTTPS 就像是在原有的塑料水管之外，再包一层金属水管。一来，原有的塑料水管照样运行；二来，用金属加固了之后，不容易被戳破。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">可扩展性</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">前面说了，HTTPS 相当于是“HTTP over SSL”。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">如果 SSL 这个协议在“可扩展性”方面的设计足够牛逼，那么它除了能跟 HTTP 搭配，还能够跟其它的应用层协议搭配。岂不美哉？</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">现在看来，当初设计 SSL 的人确实比较牛。如今的 SSL/TLS 可以跟很多常用的应用层协议（比如：FTP、SMTP、POP、Telnet）搭配，来强化这些应用层协议的安全性。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">接着刚才打的比方：如果把 SSL/TLS 视作一根用来加固的金属管，它不仅可以用来加固输水的管道，还可以用来加固输煤气的管道。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">保密性（防泄密）</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">HTTPS 需要做到足够好的保密性。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">说到保密性，首先要能够对抗嗅探（行话叫 Sniffer）。所谓的“嗅探”，通俗而言就是监视你的网络传输流量。如果你使用明文的 HTTP 上网，那么监视者通过嗅探，就知道你在访问哪些网站的哪些页面。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">嗅探是最低级的攻击手法。除了嗅探，HTTPS 还需要能对抗其它一些稍微高级的攻击手法——比如“重放攻击”（后面讲协议原理的时候，会再聊）。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">完整性（防篡改）</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">除了“保密性”，还有一个同样重要的目标是“确保完整性”。关于“完整性”这个概念，在之前的博文《扫盲文件完整性校验——关于散列值和数字签名》中大致提过。健忘的同学再去温习一下。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">在发明 HTTPS 之前，由于 HTTP 是明文的，不但容易被嗅探，还容易被篡改。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">举个例子：</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">比如咱们天朝的网络运营商（ISP）都比较流氓，经常有网友抱怨说访问某网站（本来是没有广告的），竟然会跳出很多中国电信的广告。为啥会这样捏？因为你的网络流量需要经过 ISP 的线路才能到达公网。如果你使用的是明文的 HTTP，ISP 很容易就可以在你访问的页面中植入广告。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">所以，当初设计 HTTPS 的时候，还有一个需求是“确保 HTTP 协议的内容不被篡改”。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">真实性（防假冒）</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">在谈到 HTTPS 的需求时，“真实性”经常被忽略。其实“真实性”的重要程度不亚于前面的“保密性”和“完整性”。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">举个例子：</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">你因为使用网银，需要访问该网银的 Web 站点。那么，你如何确保你访问的网站确实是你想访问的网站？（这话有点绕口令）</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">有些天真的同学会说：通过看网址里面的域名，来确保。为啥说这样的同学是“天真的”？因为 DNS 系统本身是不可靠的（尤其是在设计 SSL 的那个年代，连 DNSSEC 都还没发明）。由于 DNS 的不可靠（存在“域名欺骗”和“域名劫持”），你看到的网址里面的域名【未必】是真实滴！</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">所以，HTTPS 协议必须有某种机制来确保“真实性”的需求（至于如何确保，后面会细聊）。</span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">性能</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">再来说最后一个需求——性能。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">引入 HTTPS 之后，【不能】导致性能变得太差。否则的话，谁还愿意用？</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">为了确保性能，SSL 的设计者至少要考虑如下几点：</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;padding:0 0 0 0 ;line-height:26px"><span style="font-family: Symbol; font-size: 16px;">·&nbsp;</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;padding:0 0 0 0 ;line-height:26px"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px; background: rgb(255, 255, 255);">如何选择加密算法（“对称”or“非对称”）？</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;padding:0 0 0 0 ;line-height:26px"><span style="font-family: Symbol; font-size: 16px;">·&nbsp;</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;padding:0 0 0 0 ;line-height:26px"><span style="font-family: Symbol; font-size: 16px;">·&nbsp;</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;padding:0 0 0 0 ;line-height:26px"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px; background: rgb(255, 255, 255);">如何兼顾 HTTP 采用的“短连接”TCP 方式？</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:24px;padding:0 0 0 0 ;line-height:26px"><span style="font-family: Symbol; font-size: 16px;">·&nbsp;</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">&nbsp;</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;"><span style="font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">（</span>SSL 是在1995年之前开始设计的，那时候的 HTTP 版本还是 1.0，默认使用的是“短连接”的 TCP 方式——默认不启用 Keep-Alive）</span><span style="font-size: 16px; color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; letter-spacing: 0px;">&nbsp;</span></span></p><h3 style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong><span style="color: rgb(171, 25, 66); letter-spacing: 0px; font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">小结</span></strong></span></h3><p style="margin-top:0;margin-right:0;margin-bottom:16px;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;"><br/><span style="font-size: 16px; font-family: &quot;Hiragino Sans GB&quot;;">以上就是设计</span> SSL 协议时，必须兼顾的各种需求。后面聊协议的实现时，俺会拿 SSL 协议的特点跟前面的需求作对照。看看这些需求是如何一一满足滴。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:16px;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-size: 16px;"><strong style="line-height: 30px;"><span style="font-size: 16px; font-family: 微软雅黑; color: rgb(0, 187, 236);">设计 HTTPS 协议的主要难点</span></strong></span></p><p style="margin-top:0;margin-right:0;margin-bottom:16px;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">设计 HTTPS 这个协议，有好几个难点。俺个人认为最大的难点在于“密钥交换”。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:16px;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">在传统的密码学场景中，假如张三要跟李四建立一个加密通讯的渠道，双方事先要约定好使用哪种加密算法？同时也要约定好使用的密钥是啥？在这个场景中，加密算法的【类型】让旁人知道，没太大关系。但是密钥【千万不能】让旁人知道。一旦旁人知道了密钥，自然就可以破解通讯的密文，得到明文。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:16px;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">好，现在回到 HTTPS 的场景。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">当你访问某个公网的网站，你的浏览器和网站的服务器之间，如果要建立加密通讯，必然要商量好双方使用啥算法，啥密钥。——在网络通讯术语中，这个过程称之为“握手/handshake”。</span></p><p style="margin-top:0;margin-right:0;margin-bottom:0;margin-left:0;text-indent:0;padding:0 0 0 0 ;line-height:26px;background:rgb(255,255,255)"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">&nbsp;</span></p><p style="margin: 0px 0px 16px; text-indent: 0px; padding: 0px; line-height: 26px; background: rgb(255, 255, 255);"><span style="font-family: &quot;Hiragino Sans GB&quot;; color: rgb(62, 62, 62); letter-spacing: 0px; font-size: 16px;">在握手阶段，因为加密方式还没有协商好，所以握手阶段的通讯必定是【明文】滴！既然是明文，自然有可能被第三方偷窥到。然后，还要考虑到双方之间隔着一个互联网，什么样的偷窥都可能发生。</span></p><p style="margin: 0px 0px 16px; text-indent: 0px; padding: 0px; line-height: 26px; background: rgb(255, 255, 255);"><span style="font-size: 16px; color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; letter-spacing: 0px;">因此，在握手的过程中，如何做到安全地交换密钥信息，而不让周围的第三方看到。这就是设计 HTTPS 最大的难点。</span></p><p style="margin: 0px 0px 16px; text-indent: 0px; padding: 0px; line-height: 26px; background: rgb(255, 255, 255);"><span style="color: rgb(62, 62, 62); font-family: &quot;Hiragino Sans GB&quot;; font-size: 16px;">资料来源：网络</span></p>			           </div>
			       </li>
			</ul>
			<ul class="connect">
                            <h5><i class="relative-article"></i>相关文章</h5>
			        			        <li>
                                    <i class="items_li"></i>
                                    <a href="/article/39.html" class="connectLink">PHPExcel导出</a><span>2017-12-22</span>
                                </li>
			        			        <li>
                                    <i class="items_li"></i>
                                    <a href="/article/37.html" class="connectLink">PHP 识别图片相似</a><span>2017-09-19</span>
                                </li>
			        			        <li>
                                    <i class="items_li"></i>
                                    <a href="/article/36.html" class="connectLink">pack与unpac</a><span>2017-09-15</span>
                                </li>
			        			        <li>
                                    <i class="items_li"></i>
                                    <a href="/article/35.html" class="connectLink">PHP Curl模拟</a><span>2017-09-13</span>
                                </li>
			        			        <li>
                                    <i class="items_li"></i>
                                    <a href="/article/34.html" class="connectLink">PHP header</a><span>2017-09-06</span>
                                </li>
			        			        <li>
                                    <i class="items_li"></i>
                                    <a href="/article/33.html" class="connectLink"> PHP中的 抽象类</a><span>2017-06-23</span>
                                </li>
			        			        <li>
                                    <i class="items_li"></i>
                                    <a href="/article/31.html" class="connectLink">PHP位运算(RBA</a><span>2017-06-07</span>
                                </li>
			        			        <li>
                                    <i class="items_li"></i>
                                    <a href="/article/30.html" class="connectLink">MySQL行级锁、表</a><span>2017-06-07</span>
                                </li>
			        			</ul>
			<ul class="connect Label">
		          <h5><span></span>文章分类</h5>
                          		          <li><a href="/home/childtype/typeid/21" class="LabelLink">Yaf</a></li>
                          		          <li><a href="/home/childtype/typeid/20" class="LabelLink">ThinkPHP</a></li>
                          		          <li><a href="/home/childtype/typeid/19" class="LabelLink">Yii</a></li>
                          		          <li><a href="/home/childtype/typeid/18" class="LabelLink">开发框架</a></li>
                          		          <li><a href="/home/childtype/typeid/16" class="LabelLink">科技</a></li>
                          		          <li><a href="/home/childtype/typeid/15" class="LabelLink">Mysql</a></li>
                          		          <li><a href="/home/childtype/typeid/14" class="LabelLink">Linux</a></li>
                          		          <li><a href="/home/childtype/typeid/13" class="LabelLink">Windows</a></li>
                          		          <li><a href="/home/childtype/typeid/12" class="LabelLink">JavaScript</a></li>
                          		          <li><a href="/home/childtype/typeid/11" class="LabelLink">Css</a></li>
                          		          <li><a href="/home/childtype/typeid/10" class="LabelLink">HTML</a></li>
                          		    </ul>
	</div>	    
    <!--相关评论 -->
    <h4 class="comment">相关评论:</h4>
    <ul class="commentList">
       
    </ul>

    <!-- 分页 -->
    <div class="_LookMore" style="display: none;">查看更多</div>
	<div id="biuuu_city"></div>
	<!-- 留言 -->
	<ul class="commentSbmit">
        <li class="_personShow" style="text-align:left">
            <img src="/assets/home/img/default.jpg" alt="">
            <span style="display: none">退出登录</span>
        </li>
        <li class="myself">
            <textarea name="" id="" cols="30" rows="10"></textarea>
            <p><img src="/assets/home/img/1.jpg" alt=""></p>
            <div class="shengMessage">发布</div>
            <div class="Expression shengHidden bottomReply">
            	<ul>    
                                            <li class="ExpressionImg" imgNum="[惊呆]"><img src="/assets/home/emoubb/1.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[可爱]"><img src="/assets/home/emoubb/2.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[憨笑]"><img src="/assets/home/emoubb/3.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[坏笑]"><img src="/assets/home/emoubb/4.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[无聊]"><img src="/assets/home/emoubb/5.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[生气]"><img src="/assets/home/emoubb/6.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[折磨]"><img src="/assets/home/emoubb/7.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[不屑]"><img src="/assets/home/emoubb/8.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[流泪]"><img src="/assets/home/emoubb/9.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[不理]"><img src="/assets/home/emoubb/10.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[晕]"><img src="/assets/home/emoubb/11.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[冷汗]"><img src="/assets/home/emoubb/12.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[困]"><img src="/assets/home/emoubb/13.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[害羞]"><img src="/assets/home/emoubb/14.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[呐喊]"><img src="/assets/home/emoubb/15.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[稀罕]"><img src="/assets/home/emoubb/16.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[色]"><img src="/assets/home/emoubb/17.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[酷]"><img src="/assets/home/emoubb/18.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[石化]"><img src="/assets/home/emoubb/19.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[囧]"><img src="/assets/home/emoubb/20.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[睡觉]"><img src="/assets/home/emoubb/21.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[调皮]"><img src="/assets/home/emoubb/22.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[亲亲]"><img src="/assets/home/emoubb/23.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[疑问]"><img src="/assets/home/emoubb/24.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[闭嘴]"><img src="/assets/home/emoubb/25.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[难过]"><img src="/assets/home/emoubb/26.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[好奇]"><img src="/assets/home/emoubb/27.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[得意]"><img src="/assets/home/emoubb/28.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[鄙视]"><img src="/assets/home/emoubb/29.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[猪头]"><img src="/assets/home/emoubb/30.gif" alt=""></li>
                                	</ul>
            </div>
        </li>
	</ul>
	<!-- qq登录 -->
<span id="qqLoginBtn" style="display: none;"></span>
</div>
<div id="sheng1" style="width:200px;height:50px;position:fixed;left:0;bottom:200px;"></div>
<!-- 待克隆表情包 -->
<div class="shengClone" style="display: none;">
	<div class="Expression cloneOne">
            	<ul>
                                            <li class="ExpressionImg" imgNum="[惊呆]"><img src="/assets/home/emoubb/1.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[可爱]"><img src="/assets/home/emoubb/2.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[憨笑]"><img src="/assets/home/emoubb/3.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[坏笑]"><img src="/assets/home/emoubb/4.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[无聊]"><img src="/assets/home/emoubb/5.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[生气]"><img src="/assets/home/emoubb/6.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[折磨]"><img src="/assets/home/emoubb/7.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[不屑]"><img src="/assets/home/emoubb/8.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[流泪]"><img src="/assets/home/emoubb/9.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[不理]"><img src="/assets/home/emoubb/10.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[晕]"><img src="/assets/home/emoubb/11.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[冷汗]"><img src="/assets/home/emoubb/12.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[困]"><img src="/assets/home/emoubb/13.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[害羞]"><img src="/assets/home/emoubb/14.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[呐喊]"><img src="/assets/home/emoubb/15.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[稀罕]"><img src="/assets/home/emoubb/16.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[色]"><img src="/assets/home/emoubb/17.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[酷]"><img src="/assets/home/emoubb/18.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[石化]"><img src="/assets/home/emoubb/19.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[囧]"><img src="/assets/home/emoubb/20.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[睡觉]"><img src="/assets/home/emoubb/21.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[调皮]"><img src="/assets/home/emoubb/22.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[亲亲]"><img src="/assets/home/emoubb/23.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[疑问]"><img src="/assets/home/emoubb/24.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[闭嘴]"><img src="/assets/home/emoubb/25.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[难过]"><img src="/assets/home/emoubb/26.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[好奇]"><img src="/assets/home/emoubb/27.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[得意]"><img src="/assets/home/emoubb/28.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[鄙视]"><img src="/assets/home/emoubb/29.gif" alt=""></li>
                                            <li class="ExpressionImg" imgNum="[猪头]"><img src="/assets/home/emoubb/30.gif" alt=""></li>
                                	</ul>
    </div>
</div>
</body>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script>
<script>
    $(function(){
       uParse('.content', {
            rootPath: '/assets/ueditor/'
        });
    });
</script>
</html>   <!-- <img src="/assets/home/img/glyphicons-halflings-white.png" alt="搜索"> -->
    <div class="clearfix"></div>
    <div class="footer" style="margin:0 auto;margin-top: 20px;width: 1100px;height: 30px;line-height: 30px;color:#666;">
        Powered by:七秒记忆网&nbsp;&nbsp;网站备案号：<a href="http://www.miitbeian.gov.cn" target="_blank">皖ICP备13016713号-2</a>&nbsp;&nbsp;<font size="4">&COPY;</font>2016-2018
    </div>
";i:1;N;}i:1;N;}